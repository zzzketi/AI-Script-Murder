from typing import List, Dict

SCRIPTS = [
  {
    "id": "script_1",
    "title": "午夜列车谋杀案",
    "image":"cover_001",
    "score":9.2,
    "difficulty":"新手",
    "tags":["经典","悬疑"],
    "cover_url": "https://example.com/covers/train.jpg",
    "description": "深夜从A市开往B市的列车上，一起离奇命案……",
    "background": "故事发生在一列行驶在深夜中的特快列车上，外界大雪纷飞，列车因故障临时停车。车厢内暖气充足，但人心却冷若冰霜。",
    "author": {
      "id": "author_1",
      "name": "剧本作者 · 小李",
      "avatar": "https://example.com/authors/xiaoli.png",
      "bio": "专注现代推理本创作。"
    },
    "characters": [
      {
        "id": "c_detective", "name": "侦探", "short_desc": "逻辑缜密的旁观者",
        "detail": "受邀乘客", "public_info": "一名私家侦探，眼神锐利，随身带着笔记本。", "secret_info": "其实是第一次办案，为了不露怯，一直在模仿小说里的侦探。并没有杀人动机。"
      },
      {
        "id": "c_actress", "name": "苏明星", "short_desc": "知名女演员",
        "detail": "演员", "public_info": "光鲜亮丽，带着墨镜，似乎在躲避狗仔。", "secret_info": "有大尺度私密照在死者手中，案发前曾去死者包厢跪求放过，被死者羞辱。包里有一把防身用的剪刀。"
      },
      {
        "id": "c_doctor", "name": "林医生", "short_desc": "外科医生",
        "detail": "医生", "public_info": "看起来很斯文，戴着金丝眼镜，正在擦拭手术刀（职业习惯）。", "secret_info": "【凶手】三年前因医疗事故导致死者父亲死亡，死者以此勒索林医生巨额封口费。林医生不堪重负，利用停电时机，凭借对人体解剖的熟悉，一刀刺中心脏。"
      },
      {
        "id": "c_boss", "name": "王老板", "short_desc": "煤矿老板",
        "detail": "商人", "public_info": "暴发户气质，戴大金链子，大声喧哗。", "secret_info": "生意上和死者有严重冲突，死者抢了他的大单。案发前曾给死者递过一杯下了泻药的酒，想让他出丑，但没想杀人。"
      }
    ],
    "narratage": { "chapters": [] },
    "chapters": [
      {
        "chapter_id": 1,
        "title": "第一章：案发瞬间",
        "narration": "【旁白】午夜12点，列车餐车突然停电，四周陷入一片漆黑。黑暗中传来死者赵某的一声惨叫和重物倒地声。约30秒后备用灯亮起，赵某胸口插着一把餐刀倒在血泊中，已无生命体征。现场只有你们四人。",
        "discussion_question": "请各位介绍自己案发时（刚才停电的那30秒内）的具体位置和行为。谁离死者最近？"
      },
      {
        "chapter_id": 2,
        "title": "第二章：搜证环节",
        "narration": "【旁白】乘警赶到，搜查了大家的随身物品。在林医生的包里发现带有血迹的手帕（他解释是擦伤口的），在苏明星包里发现了被撕碎的借据碎片，王老板口袋里有一包未用完的白色粉末。",
        "discussion_question": "林医生、苏明星、王老板，请解释搜到的物品。特别是王老板，那是毒药吗？"
      },
      {
        "chapter_id": 3,
        "title": "第三章：深入调查",
        "narration": "【旁白】法医初步鉴定，死者并未中毒，死因是心脏被利器刺穿。但死者体内含有微量安眠药成分。有人在案发前动过手脚。",
        "discussion_question": "谁有机会给死者下药？是为了迷晕他方便行凶吗？"
      },
      {
        "chapter_id": 4,
        "title": "第四章：往事揭露",
        "narration": "【旁白】调查背景发现，三年前林医生的一场手术导致赵某父亲死亡，赵某一直以此勒索。苏明星则是因为艳照门被赵某控制。王老板面临破产危机，都是拜死者所赐。",
        "discussion_question": "看起来大家都有杀机。苏明星，你去找死者时发生了什么？林医生，你的勒索到期了吗？"
      },
      {
        "chapter_id": 5,
        "title": "第五章：最后辩论",
        "narration": "【旁白】列车马上就要恢复运行了，警察即将带走所有人。这是你们最后找出真凶的机会。所有线索已公开，请根据作案手法（黑暗中一刀毙命）锁定真凶。",
        "discussion_question": "请带领大家进行最后的逻辑梳理，锁定凶手并投票。"
      }
    ],
    "truth": "真凶是【林医生】。他在王老板递酒之前就已将安眠药抹在杯口。停电是他破坏了电路（利用医生的手术刀切断电线），利用医生对人体结构的熟悉，黑暗中一刀毙命。"
  },
  {
    "id": "script_2",
    "title": "血染长生殿",
    "image":"cover_001",
    "score":9.2,
    "difficulty":"新手",
    "tags":["经典","悬疑"],
    "cover_url": "https://example.com/covers/ancient.jpg",
    "description": "大梁国师六十大寿，长生殿内觥筹交错，却不想这一夜竟成了最后的晚宴……",
    "background": "大梁王朝，国师‘玄机子’权倾朝野。今日是他在长生殿举办六十大寿，传闻他将在今晚公布绝世武功《长生诀》的继承人。殿外雷雨交加，殿内烛火摇曳。",
    "author": {
      "id": "author_2",
      "name": "古风 · 墨客",
      "avatar": "https://example.com/authors/moke.png",
      "bio": "擅长古风权谋与江湖恩怨剧本。"
    },
    "characters": [
      {
        "id": "c_apprentice", "name": "大师兄", "short_desc": "隐忍多年的首席弟子",
        "detail": "国师大弟子", "public_info": "为人谦逊，深受国师信赖，是继承人的热门人选。", "secret_info": "其实早已发现国师在用弟子试毒修炼邪功。今晚准备了毒酒，但在下毒前发现师父已经死了。"
      },
      {
        "id": "c_princess", "name": "长乐公主", "short_desc": "娇蛮任性的皇室成员",
        "detail": "公主", "public_info": "国师的义女，深受宠爱，衣着华贵。", "secret_info": "【凶手】国师其实是当年杀害你生母的仇人。你利用献舞的机会，将剧毒‘鹤顶红’涂抹在袖口，趁搀扶国师时让他吸入毒粉。"
      },
      {
        "id": "c_general", "name": "铁将军", "short_desc": "手握重兵的大将军",
        "detail": "将军", "public_info": "一身戎装，腰悬宝剑，与国师政见不合。", "secret_info": "今晚原本打算带兵逼宫，强迫国师交出兵权。在宴会上故意打翻了酒杯，是为了发信号，结果还没动手人就死了。"
      },
      {
        "id": "c_doctor_ancient", "name": "赛华佗", "short_desc": "江湖神医",
        "detail": "游方郎中", "public_info": "被请来为国师调理身体，背着一个大药箱。", "secret_info": "其实是刺客组织首领伪装的。本想用银针刺穴杀人，但发现国师脉象早已中毒，于是选择按兵不动，想看是谁抢了先手。"
      }
    ],
    "narratage": { "chapters": [] },
    "chapters": [
      {
        "chapter_id": 1,
        "title": "第一章：寿宴惊变",
        "narration": "【旁白】酒过三巡，国师玄机子起身准备宣布继承人。突然，他面色发紫，捂住胸口，指着前方说了一个“你”字，便气绝身亡。殿门紧闭，无人能出。",
        "discussion_question": "刚才国师倒下前，你们每个人都在做什么？那个“你”字是指向谁？"
      },
      {
        "chapter_id": 2,
        "title": "第二章：搜身验毒",
        "narration": "【旁白】为了自证清白，大家互相搜身。在大师兄怀里发现一包‘断肠散’，在将军腰间发现密谋信件，赛华佗的药箱里有暗器。唯独公主身上只有胭脂水粉。",
        "discussion_question": "大师兄，你为何随身带毒？将军，你的信里写了什么？"
      },
      {
        "chapter_id": 3,
        "title": "第三章：尸检疑云",
        "narration": "【旁白】赛华佗检查尸体后发现，国师并非中了断肠散（需要口服），而是鼻腔内有微量红色粉末，且没有任何外伤。这是吸入式毒药。",
        "discussion_question": "谁有机会近距离接触国师的口鼻？大家的站位是怎样的？"
      },
      {
        "chapter_id": 4,
        "title": "第四章：深宫旧恨",
        "narration": "【旁白】搜查书房发现国师的日记，记载了当年为了修炼邪功害死了一位后宫妃子（公主生母），并收养其女作为掩护。同时记载了打算今晚除掉功高盖主的铁将军。",
        "discussion_question": "动机都浮出水面了。公主，你是否知道自己的身世？"
      },
      {
        "chapter_id": 5,
        "title": "第五章：真凶指认",
        "narration": "【旁白】禁卫军正在破门，留给你们的时间不多了。既然不是口服毒药，也不是刀剑外伤。请根据毒药进入途径锁定真凶。",
        "discussion_question": "是谁利用了亲近之便，完成了这场无接触的谋杀？"
      }
    ],
    "truth": "真凶是【长乐公主】。她利用献舞结束上前搀扶国师的机会，挥动涂有毒粉的衣袖。国师因情绪激动呼吸急促，吸入袖口抖落的毒粉而亡。大师兄虽有杀心但未及动手。"
  },
  {
    "id": "script_3",
    "title": "最后的IPO",
    "image":"cover_001",
    "score":9.2,
    "difficulty":"新手",
    "tags":["经典","悬疑"],
    "cover_url": "https://example.com/covers/tech.jpg",
    "description": "知名科技独角兽公司上市前夜，CEO惨死在全封闭的总裁办公室内……",
    "background": "顶尖科技公司‘未来视界’即将赴美上市。今晚是上市前的最后一次高层闭门会议。狂风暴雨夜，位于大厦顶层（50楼）的总裁办公室成了密室。",
    "author": {
      "id": "author_3",
      "name": "悬疑 · 键盘侠",
      "avatar": "https://example.com/authors/keyboard.png",
      "bio": "IT行业出身，擅长高科技犯罪剧本。"
    },
    "characters": [
      {
        "id": "c_co_founder", "name": "李合伙", "short_desc": "被架空的联合创始人",
        "detail": "公司元老", "public_info": "虽然是二把手，但早已没有实权，经常在办公室借酒消愁。", "secret_info": "发现了CEO做假账的证据，准备明天向证监会举报。今晚本来想去谈判，结果发现CEO已经死了。"
      },
      {
        "id": "c_secretary", "name": "安秘书", "short_desc": "CEO的贴身秘书",
        "detail": "行政秘书", "public_info": "干练漂亮，掌管着公司所有的行程安排和门禁卡。", "secret_info": "【凶手】是商业间谍，被竞争对手收买。利用伪造的语音指令控制了办公室的智能家居系统，制造了意外死亡假象。"
      },
      {
        "id": "c_cto", "name": "张技术", "short_desc": "天才程序员",
        "detail": "技术总监", "public_info": "不修边幅，技术狂人，据说核心算法都是他写的。", "secret_info": "CEO要把他的核心技术出售给军方，这违背了他的初衷。他编写了一个病毒程序准备瘫痪公司服务器，但没想杀人。"
      },
      {
        "id": "c_wife", "name": "白夫人", "short_desc": "集团千金",
        "detail": "CEO妻子", "public_info": "名门闺秀，不仅是妻子，更是公司的天使投资人。", "secret_info": "知道CEO在外有私生子且打算转移财产离婚。包里藏了一把手枪，今晚准备同归于尽，但还没来得及拿出来。"
      }
    ],
    "narratage": { "chapters": [] },
    "chapters": [
      {
        "chapter_id": 1,
        "title": "第一章：密室尸体",
        "narration": "【旁白】晚上10点，安秘书发现总裁办公室无人应答，刷卡进入后发现，CEO趴在办公桌上，面色狰狞。房间窗户紧闭，唯一的门需要指纹或门禁卡才能打开。这是一间完美的密室。",
        "discussion_question": "大家最后一次见到CEO是什么时候？谁有进入办公室的权限？"
      },
      {
        "chapter_id": 2,
        "title": "第二章：现场勘查",
        "narration": "【旁白】警方未到，安保主管封锁现场。死者身上没有外伤，但身后的智能温控系统显示温度极低（16度），且空气中弥漫着一股苦杏仁味。桌上有一杯没喝完的咖啡。",
        "discussion_question": "苦杏仁味通常代表氰化物。是谁在咖啡里下了毒？还是有其他途径？"
      },
      {
        "chapter_id": 3,
        "title": "第三章：技术还原",
        "narration": "【旁白】张技术检查了智能家居后台日志，发现案发时间段内，温控系统被手动调低，且新风系统曾高功率运转。奇怪的是，咖啡杯里并未检测出毒物。",
        "discussion_question": "既然咖啡没毒，那毒气从何而来？谁能控制这些智能设备？"
      },
      {
        "chapter_id": 4,
        "title": "第四章：利益纠葛",
        "narration": "【旁白】深入挖掘发现：李合伙的举报信草稿在垃圾桶里；白夫人的包里发现了枪；张技术的电脑里有病毒代码。而安秘书的账户近期有一笔巨额海外汇款。",
        "discussion_question": "安秘书，解释一下你的巨额汇款。张技术，智能系统是不是你黑进去的？"
      },
      {
        "chapter_id": 5,
        "title": "第五章：最后的代码",
        "narration": "【旁白】真相即将大白。如果凶手没有直接进入房间，而是利用了某种远程手段释放了毒气。谁最熟悉这套CEO引以为傲的‘全智能办公室’？",
        "discussion_question": "找出那个利用高科技手段杀人于无形的真凶。"
      }
    ],
    "truth": "真凶是【安秘书】。她并未直接下毒，而是利用伪造的CEO语音指令（Deepfake技术）远程启动了办公室的隐藏保险柜自毁程序（内含氰化物防盗装置），通过新风系统将毒气扩散。因为她是秘书，录制了大量CEO的语音素材，最容易训练模型。"
  }
]

SCRIPT_INDEX: Dict[str, dict] = {s["id"]: s for s in SCRIPTS}